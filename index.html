<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ‹ç«‹è‡ºç£å¤§å­¸ç¤¾æœƒè²¬ä»»ã€Œè‡ºå¤§ã€‚æ£®æ—ã€‚å­¸é™¢2.0ã€è¾²ç”°å¾®æ£²åœ°ç”Ÿæ…‹è¨­ç½®å°éŠæˆ²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0fdf4;
        }
        .game-scene {
            position: relative;
            width: 100%;
            aspect-ratio: 4 / 3;
            max-width: 1200px;
            margin: auto;
            background: linear-gradient(to bottom, #87ceeb 30%, #a1d9a3 30%);
            overflow: hidden;
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border: 8px solid #654321;
        }
        #connection-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 15;
        }
        .forest { position: absolute; top: 0; left: 0; width: 35%; height: 50%; background: #228b22; clip-path: polygon(0 0, 100% 0, 100% 60%, 80% 100%, 0 100%); z-index: 1; }
        .low-mountain { position: absolute; top: 5%; left: 20%; width: 40%; height: 40%; background: #556b2f; border-radius: 50% 50% 0 0; z-index: 0; }
        .farm-plot { position: absolute; background-color: #f5deb3; border: 2px solid #cd853f; }
        .farm-1 { top: 45%; left: 5%; width: 30%; height: 25%; transform: skew(-15deg); }
        .farm-2 { top: 50%; left: 40%; width: 35%; height: 30%; background-color: #d2b48c; }
        .farm-3 { top: 75%; left: 10%; width: 35%; height: 20%; transform: skew(10deg); }
        .stream { position: absolute; top: 30%; left: 70%; width: 25%; height: 70%; background: #add8e6; clip-path: polygon(20% 0, 40% 0, 75% 100%, 55% 100%); z-index: 5; }
        .pond { position: absolute; bottom: 5%; right: 5%; width: 25%; height: 20%; background: #4682b4; border-radius: 50%; z-index: 6; }
        .agricultural-facility { position: absolute; top: 35%; left: 55%; width: 100px; height: 80px; background: #8b4513; z-index: 4; }
        .agricultural-facility::after { content: ''; position: absolute; top: -40px; left: 0; width: 0; height: 0; border-left: 50px solid transparent; border-right: 50px solid transparent; border-bottom: 40px solid #a0522d; }
        .farmhouse { position: absolute; bottom: 25%; left: 2%; width: 60px; height: 50px; background: #d2691e; z-index: 4; }
        .farmhouse::after { content: ''; position: absolute; top: -25px; left: 0; width: 0; height: 0; border-left: 30px solid transparent; border-right: 30px solid transparent; border-bottom: 25px solid #a0522d; }
        
        .road { position: absolute; top: 30%; left: 0; width: 100%; height: 8%; background: #696969; z-index: 3; }
        .landscape-label { position: absolute; color: white; background-color: rgba(0, 0, 0, 0.5); padding: 2px 8px; border-radius: 6px; font-size: 0.9rem; font-weight: bold; z-index: 20; pointer-events: none; }
        
        .game-icon { 
            position: absolute; 
            font-size: 0.7rem; 
            text-align: center; 
            text-shadow: 0 1px 3px rgba(0,0,0,0.4); 
            transition: all 1s ease-in-out; 
            z-index: 25; 
        }
        .game-icon span { 
            display: block; 
            font-size: 0.5rem; 
            font-weight: bold; 
            color: #fff; 
            text-shadow: 0 1px 2px rgba(0,0,0,0.6);
        }
        
        .disturbance-icon { transition: transform 0.5s ease-out; }
        .disturbance-icon .icon-symbol { font-size: 1rem; color: red; animation: pulse 1.5s infinite; }
        
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        @keyframes move-randomly { 0% { transform: translate(0, 0); } 25% { transform: translate(var(--x1), var(--y1)); } 50% { transform: translate(var(--x2), var(--y2)); } 75% { transform: translate(var(--x3), var(--y3)); } 100% { transform: translate(0, 0); } }
        .animal.active { animation: move-randomly 10s infinite; }
        
        .drop-zone { position: absolute; border: 3px dashed rgba(0, 128, 0, 0.7); background: rgba(144, 238, 144, 0.2); border-radius: 10px; z-index: 35; transition: background-color 0.3s; }
        
        .drop-zone.hovered { background: rgba(144, 238, 144, 0.5); }
        .drop-zone.occupied { border-style: solid; border-color: #228b22; background-color: transparent; }
        .facility { cursor: grab; transition: transform 0.2s; padding: 0.25rem 0.5rem; }
        .facility:active { cursor: grabbing; transform: scale(1.1); z-index: 100; }
        .facility.placed { opacity: 0.5; cursor: not-allowed; background-color: #d1d5db; }
        .modal-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 100; display: flex; justify-content: center; align-items: center; }
        
        #animal-pen {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }
        .pen-animal {
            transition: opacity 0.5s;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 2px;
            border-radius: 6px;
            font-size: 1.2rem;
        }
    </style>
</head>
<body class="bg-green-50 text-gray-800 p-4 lg:p-8">

    <div id="game-container" class="max-w-7xl mx-auto">
        <header class="text-center mb-4">
            <h1 class="text-2xl md:text-3xl font-bold text-green-800">åœ‹ç«‹è‡ºç£å¤§å­¸ç¤¾æœƒè²¬ä»»ã€Œè‡ºå¤§ã€‚æ£®æ—ã€‚å­¸é™¢2.0ã€</h1>
            <h2 class="text-xl md:text-2xl font-semibold text-green-700">è¾²ç”°å¾®æ£²åœ°ç”Ÿæ…‹è¨­ç½®å°éŠæˆ²</h2>
        </header>

        <div class="flex flex-col gap-4">
            <div id="animal-pen-container" class="w-full bg-green-800 bg-opacity-70 p-2 rounded-lg shadow-inner">
                <h3 class="text-md font-bold text-white mb-2 text-center">å¾…é€²é§ç”Ÿç‰©</h3>
                <div id="animal-pen"></div>
            </div>

            <main class="w-full">
                <div id="scene" class="game-scene">
                    <canvas id="connection-canvas"></canvas>
                    <div class="forest"></div>
                    <div class="low-mountain"></div>
                    <div class="road"></div>
                    <div class="farm-plot farm-1"></div>
                    <div class="farm-plot farm-2"></div>
                    <div class="farm-plot farm-3"></div>
                    <div class="stream"></div>
                    <div class="pond"></div>
                    <div class="agricultural-facility"></div>
                    <div class="farmhouse"></div>
                    <div class="landscape-label" style="top: 5%; left: 5%;">æ£®æ—</div>
                    <div class="landscape-label" style="top: 10%; left: 30%;">æ·ºå±±</div>
                    <div class="landscape-label" style="top: 55%; left: 15%;">è¾²ç”°</div>
                    <div class="landscape-label" style="top: 60%; left: 48%;">è¾²ç”°</div>
                    <div class="landscape-label" style="top: 80%; left: 20%;">è¾²ç”°</div>
                    <div class="landscape-label" style="top: 40%; left: 78%;">æºªæµ</div>
                    <div class="landscape-label" style="bottom: 12%; right: 15%;">æ°´å¡˜</div>
                    <div class="landscape-label" style="top: 48%; left: 56%;">è¾²æ¥­è¨­æ–½</div>
                    <div class="landscape-label" style="bottom: 33%; left: 3%;">è¾²èˆ</div>
                    <div class="landscape-label" style="top: 31%; left: 2%;">å±±é‚Šé“è·¯</div>
                </div>
                <div id="connection-counter" class="mt-2 text-center text-lg font-bold text-green-700 bg-green-100 p-2 rounded-lg">
                    å·²é€£æ¥ 0 å€‹ç”Ÿæ…‹æ£²åœ°
                </div>
            </main>

            <aside class="w-full bg-white p-4 rounded-lg shadow-lg">
                <h3 class="text-md font-bold border-b-2 border-green-600 pb-2 mb-2">ç”Ÿæ…‹è¨­æ–½ <span class="text-xs text-gray-500 font-normal">(ä½¿ç”¨æ‰‹æ©Ÿè«‹é•·æŒ‰ç”Ÿæ…‹è¨­æ–½å¡ç‰Œ>ç§»å‹•åˆ°è¾²æ‘ç•«å¸ƒä¸­çš„æ­£ç¢ºè™›ç·šæ¡†å…§)</span></h3>
                <div id="facilities-list" class="flex flex-row flex-wrap gap-2 justify-center"></div>
            </aside>
        </div>

        <footer class="text-center mt-6 text-xs text-gray-500">
            <p>å…±åŒé–‹ç™¼å–®ä½ï¼šç¤¾åœ˜æ³•äººå—æŠ•ç¸£æ°´é‡Œé„‰å•†åœˆå‰µç”Ÿå…±å¥½å”æœƒ | ç¤¾åœ˜æ³•äººå—æŠ•ç¸£é’å¹´è¾²æ°‘æ°¸çºŒç™¼å±•å”æœƒ | æ°´é‡Œé‡Œå±±åŸºåœ°#é‡Œå±±é¤æ¡Œåœ˜éšŠ #æ°´é‡Œé’è¾² | æ°´é‡Œç‡Ÿæ—å€</p>
            <p>Â© 2025 æ°´é‡Œæ°¸çºŒå…±å¥½è¯ç›Ÿ | V1.0ï¼Œã€Œé‡Œå±±é¤æ¡Œã€åœ˜éšŠè¨­è¨ˆ</p>
        </footer>
    </div>

    <div id="feedback-modal" class="modal-backdrop hidden">
        <div class="bg-white rounded-lg shadow-2xl p-6 w-11/12 md:max-w-lg mx-auto transform transition-all duration-300 scale-95 opacity-0 max-h-[90vh] overflow-y-auto">
            <h3 id="modal-title" class="text-2xl font-bold text-green-700 mb-4">å¤ªæ£’äº†ï¼</h3>
            <div id="modal-content" class="text-base text-left"></div>
            <button id="modal-close-btn" class="mt-6 w-full bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition-colors">ç¹¼çºŒæ¢ç´¢</button>
        </div>
    </div>
    <div id="sroi-modal" class="modal-backdrop hidden">
        <div class="bg-white rounded-lg shadow-2xl p-6 w-11/12 md:max-w-2xl mx-auto transform transition-all duration-300 scale-95 opacity-0 max-h-[90vh] overflow-y-auto">
            <h3 class="text-3xl font-bold text-center text-yellow-500 mb-4">æ­å–œï¼æ‚¨å·²æˆåŠŸä¸²é€£æ‰€æœ‰é—œéµæ£²åœ°ï¼</h3>
            <div class="text-base text-left space-y-6">
                <div>
                    <h4 class="text-xl font-bold text-green-800 border-b-2 border-green-200 pb-2 mb-3">ğŸ‘¨â€ğŸŒ¾ çµ¦è¾²å‹çš„æ°¸çºŒç´…åˆ©ï¼šç”Ÿç”¢èˆ‡ç”Ÿæ…‹çš„é›™è´</h4>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><b>ç”Ÿæ…‹æœå‹™å¢å¼·ï¼š</b>é€éè‰å¸¶ã€æ¿•åœ°å¸å¼•ä¾†çš„èœœèœ‚ã€ç“¢èŸ²ã€é’è›™ï¼Œèƒ½å¹«åŠ©ä½œç‰©æˆç²‰ã€åƒæ‰å®³èŸ²ï¼Œæœ‰æ•ˆæ¸›å°‘è¾²è—¥èˆ‡è‚¥æ–™æˆæœ¬ï¼Œè®“åœŸåœ°æ›´å¥åº·ã€‚</li>
                        <li><b>å“ç‰Œåƒ¹å€¼æå‡ï¼š</b>ã€Œç‚ºç”Ÿæ…‹è€•ä½œã€æœ¬èº«å°±æ˜¯æœ€æ£’çš„æ•…äº‹ï¼ç”Ÿæ…‹å‹å–„çš„ç”¢å“ï¼ˆå¦‚çŸ³è™ç±³ã€ç©¿å±±ç”²èŒ¶ï¼‰èƒ½ç²å¾—æ¶ˆè²»è€…èªåŒï¼Œå‰µé€ æ›´é«˜çš„å“ç‰Œåƒ¹å€¼èˆ‡å¸‚å ´å€éš”ã€‚</li>
                        <li><b>ç¤¾æœƒè³‡æœ¬ç´¯ç©ï¼š</b>å±•ç¾è¾²å ´çš„ç¤¾æœƒæŠ•è³‡å ±é…¬ç‡(SROI)ï¼Œæ›´å®¹æ˜“çˆ­å–æ”¿åºœè£œåŠ©æˆ–ä¼æ¥­çš„ESGåˆä½œï¼Œä¸¦æˆç‚ºç¤¾å€å¼•ä»¥ç‚ºå‚²çš„ç’°å¢ƒæ•™è‚²å ´åŸŸã€‚</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xl font-bold text-blue-800 border-b-2 border-blue-200 pb-2 mb-3">ğŸ¤ æˆ‘å€‘å¦‚ä½•æ”¯æŒç”Ÿæ…‹è¾²å‹</h4>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h5 class="font-bold text-lg mb-2">ğŸ™‹â€â™€ï¸ èº«ç‚ºæ¶ˆè²»è€…</h5>
                            <ul class="list-disc list-inside space-y-2 text-gray-700">
                                <li><b>ç”¨æ–°å°å¹£ä¸‹æ¶ï¼š</b>å„ªå…ˆè³¼è²·æœ‰ç”¢éŠ·å±¥æ­·ã€ç¶ è‰²ä¿è‚²æ¨™ç« çš„ç”¢å“ã€‚</li>
                                <li><b>è¦ªèº«é«”é©—èˆ‡åˆ†äº«ï¼š</b>åƒåŠ é£Ÿè¾²æ•™è‚²ã€ç”Ÿæ…‹å°è¦½ï¼Œä¸¦åœ¨ç¤¾ç¾¤åˆ†äº«æ‚¨çš„æ„Ÿå‹•ã€‚</li>
                                <li><b>ç†è§£åƒ¹å€¼å·®ç•°ï¼š</b>äº†è§£å‹å–„ç”¢å“çš„åƒ¹æ ¼ï¼ŒåŒ…å«äº†å°ç’°å¢ƒçš„æ„›è­·æˆæœ¬ã€‚</li>
                            </ul>
                        </div>
                        <div>
                            <h5 class="font-bold text-lg mb-2">ğŸ¢ èº«ç‚ºä¼æ¥­</h5>
                            <ul class="list-disc list-inside space-y-2 text-gray-700">
                                <li><b>å¯¦è¸ ESG/CSRï¼š</b>å°‡æ”¯æŒç”Ÿæ…‹è¾²æ¥­ç´å…¥ä¼æ¥­çš„æ°¸çºŒç™¼å±•ç­–ç•¥ä¸­ã€‚</li>
                                <li><b>ä¼æ¥­æ¡è³¼èˆ‡åˆä½œï¼š</b>æ¡è³¼å‹å–„è¾²ç”¢å“ä½œç‚ºå“¡å·¥ç¦åˆ©æˆ–ä¼æ¥­è´ˆç¦®ã€‚</li>
                                <li><b>æŠ•è³‡ç”Ÿæ…‹å¾©è‚²ï¼š</b>è´ŠåŠ©è¾²å ´çš„ç”Ÿæ…‹è¨­æ–½ï¼ˆå¦‚èªé¤Šä¸€ç‰‡æ¿•åœ°ï¼‰ï¼Œä½œç‚ºä¼æ¥­çš„æ°¸çºŒç¸¾æ•ˆã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <button id="sroi-modal-close-btn" class="mt-8 w-full bg-yellow-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-yellow-600 transition-colors text-lg">æˆ‘æ˜ç™½äº†ï¼ä¸€èµ·ç‚ºæ°¸çºŒåŠªåŠ›ï¼</button>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DATA SETUP ---
        const gameData={animals:[{id:"leopard-cat-1",name:"çŸ³è™",icon:"ğŸ†",position:{top:"35%",left:"15%"},habitat:"forest",released:!1},{id:"ferret-badger-1",name:"é¼¬ç¾",icon:"ğŸ¦¡",position:{top:"42%",left:"22%"},habitat:"forest",released:!1},{id:"snake-1",name:"è›‡é¡",icon:"ğŸ",position:{top:"40%",left:"5%"},habitat:"forest",released:!1},{id:"tortoise-1",name:"é™¸é¾œ",icon:"ğŸ¢",position:{top:"50%",left:"12%"},habitat:"forest",released:!1},{id:"frog-1",name:"è«¸ç¾…æ¨¹è›™",icon:"ğŸ¸",position:{top:"56%",left:"8%"},habitat:"forest",released:!1},{id:"bird-1",name:"ç«¹é›",icon:"ğŸ”",position:{top:"20%",left:"10%"},habitat:"forest",released:!1},{id:"butterfly-3",name:"è´è¶",icon:"ğŸ¦‹",position:{top:"25%",left:"20%"},habitat:"forest",released:!1},{id:"frog-2",name:"æ¾¤è›™",icon:"ğŸ¸",position:{top:"85%",left:"65%"},habitat:"water_edge",released:!1},{id:"bird-2",name:"ç™½é·º",icon:"ğŸ¦¢",position:{top:"78%",left:"90%"},habitat:"water_edge",released:!1},{id:"fish-1",name:"é­šé¡",icon:"ğŸŸ",position:{top:"65%",left:"82%"},habitat:"water_edge",released:!1},{id:"dragonfly-1",name:"èœ»èœ“",icon:"ğŸ¦—",position:{top:"70%",left:"78%"},habitat:"water_edge",released:!1},{id:"aquatic-insect-1",name:"æ°´ç”Ÿæ˜†èŸ²",icon:"ğŸ¦Ÿ",position:{top:"80%",left:"75%"},habitat:"water_edge",released:!1},{id:"firefly-2",name:"è¢ç«èŸ²",icon:"ğŸ’¡",position:{top:"78%",left:"8%"},habitat:"water_edge",released:!1},{id:"frog-3",name:"æ¾¤è›™",icon:"ğŸ¸",position:{top:"95%",left:"35%"},habitat:"wetland",released:!1},{id:"tortoise-2",name:"çƒé¾œ",icon:"ğŸ¢",position:{top:"95%",left:"50%"},habitat:"wetland",released:!1},{id:"firefly-1",name:"è¢ç«èŸ²",icon:"ğŸ’¡",position:{top:"82%",left:"42%"},habitat:"wetland",released:!1},{id:"dragonfly-2",name:"èœ»èœ“",icon:"ğŸ¦—",position:{top:"83%",left:"48%"},habitat:"wetland",released:!1},{id:"aquatic-insect-2",name:"æ°´é»½",icon:"ğŸ¦Ÿ",position:{top:"93%",left:"52%"},habitat:"wetland",released:!1},{id:"butterfly-2",name:"è´è¶",icon:"ğŸ¦‹",position:{top:"82%",left:"33%"},habitat:"wetland",released:!1},{id:"frog-4",name:"é’è›™",icon:"ğŸ¸",position:{top:"68%",left:"30%"},habitat:"farm_corridor",released:!1},{id:"bee-2",name:"èœœèœ‚",icon:"ğŸ",position:{top:"65%",left:"55%"},habitat:"farm_corridor",released:!1},{id:"butterfly-1",name:"è´è¶",icon:"ğŸ¦‹",position:{top:"62%",left:"30%"},habitat:"farm_corridor",released:!1},{id:"bird-4",name:"ç«¹é›",icon:"ğŸ”",position:{top:"78%",left:"30%"},habitat:"farm_corridor",released:!1},{id:"ferret-badger-2",name:"é¼¬ç¾",icon:"ğŸ¦¡",position:{top:"62%",left:"25%"},habitat:"farm_corridor",released:!1},{id:"snake-3",name:"è›‡é¡",icon:"ğŸ",position:{top:"56%",left:"56%"},habitat:"farm_corridor",released:!1},{id:"bee-1",name:"èœœèœ‚",icon:"ğŸ",position:{top:"48%",left:"53%"},habitat:"farm_building",released:!1},{id:"bird-5",name:"éº»é›€",icon:"ğŸ¦œ",position:{top:"40%",left:"54%"},habitat:"farm_building",released:!1},{id:"ferret-badger-3",name:"é¼¬ç¾",icon:"ğŸ¦¡",position:{top:"48%",left:"62%"},habitat:"farm_building",released:!1}],disturbances:[{id:"disturbance-dog",name:"æµæµªç‹—",icon:"ğŸ•",position:{top:"55%",left:"20%"}},{id:"disturbance-pesticide",name:"è¾²è—¥æ¼‚ç§»",icon:"â˜ ï¸",position:{top:"60%",left:"60%"}},{id:"disturbance-machine",name:"è¾²æ©Ÿ",icon:"ğŸšœ",position:{top:"78%",left:"55%"}},{id:"disturbance-trash",name:"åƒåœ¾å †ç©",icon:"ğŸ—‘ï¸",position:{top:"40%",left:"85%"}},{id:"disturbance-ditch",name:"æ°´æ³¥æ’æ°´æº",icon:"ğŸ§±",position:{top:"75%",left:"2%"}},{id:"disturbance-light",name:"éåº¦ç…§æ˜",icon:"ğŸ’¡",position:{top:"25%",left:"45%"}},{id:"disturbance-roadkill",name:"é“è·¯è·¯æ®º",icon:"ğŸš—",position:{top:"32%",left:"75%"}}],facilities:[{id:"f11",name:"æ£®æ—ç·©è¡å¸¶",icon:"ğŸŒ³",zone:"dz11",placed:!1,benefits:["forest"],reason:"ä½œç‚ºæ£®æ—èˆ‡è¾²ç”°ä¹‹é–“çš„éæ¸¡å€ï¼Œèƒ½æ¸›ç·©è¾²è€•æ´»å‹•å°æ£®æ—çš„å¹²æ“¾ï¼Œä¸¦æä¾›çŸ³è™ã€é¼¬ç¾ç­‰è¼ƒæ•æ„Ÿçš„å“ºä¹³å‹•ç‰©ä¸€å€‹å®‰å…¨çš„è¦“é£Ÿèˆ‡ç§»å‹•å‰ç·£ã€‚",howto:"<strong>ã€å¯¬åº¦ã€‘</strong>åœ¨æ£®æ—é‚Šç·£ä¿ç•™è‡³å°‘ 5â€“10 å…¬å°ºå¯¬çš„å€åŸŸã€‚<br><strong>ã€æ¤è¢«ã€‘</strong>ç‡Ÿé€ è‰æœ¬ã€çŒæœ¨ã€å°å–¬æœ¨ç­‰å¤šå±¤æ¬¡çš„æ¤è¢«çµæ§‹ï¼Œæ¨¡ä»¿è‡ªç„¶æ£®æ—æ¨£è²Œã€‚"},{id:"f1",name:"ç”°åŸ‚è‰å¸¶/å»Šé“",icon:"ğŸŒ¿",zone:"dz1",placed:!1,benefits:["farm_corridor"],reason:"æä¾›æˆç²‰æ˜†èŸ²(è´è¶ã€èœœèœ‚)ã€å¤©æ•µ(èœ˜è››ã€ç“¢èŸ²)åŠå°å‹å‹•ç‰©(é’è›™ã€è›‡)ä¸€å€‹é‡è¦çš„åº‡è­·ã€è¦“é£Ÿèˆ‡ç§»å‹•çš„é€šé“ï¼Œä¸²è¯ç ´ç¢çš„æ£²åœ°ã€‚",howto:"<strong>ã€å¯¬åº¦ã€‘</strong>åœ¨ç”°åŸ‚æˆ–ç”°é‚Šä¿ç•™ 1â€“3 å…¬å°ºå¯¬çš„æœªè€•ä½œå€ã€‚<br><strong>ã€æ¤è¢«ã€‘</strong>è®“åŸç”Ÿè‰é¡è‡ªç„¶ç”Ÿé•·ï¼Œæˆ–ç¨®æ¤é¦¬åˆ©ç­‹ã€è¬å£½èŠç­‰èœœæºæ¤ç‰©ã€‚<br><strong>ã€ç®¡ç†ã€‘</strong>ç¦æ­¢ä½¿ç”¨é™¤è‰åŠ‘ï¼Œå¯å®šæœŸäººå·¥ä¿®å‰ªä»¥é˜²éåº¦è”“å»¶ã€‚",sroiFarms:"æ¹§å¥é…ªæ¢¨è¾²å ´ã€é›¨ç¤¾å±±ä¸‹è¾²å ´ã€æŒ‡ä»¤æ•™è‚²è¾²å ´ã€é˜¿çˆ¾å–œæª¸æª¬"},{id:"f3",name:"ç”Ÿç‰©å‹å–„æ¶µæ´",icon:"ğŸ¾",zone:"dz3",placed:!1,benefits:["forest"],reason:"è®“ç¿’æ…£åœ¨åœ°é¢æ´»å‹•çš„å‹•ç‰©ï¼ˆå¦‚é¼¬ç¾ã€é£Ÿè›‡é¾œã€é’è›™ï¼‰å¯ä»¥å®‰å…¨ç©¿è¶Šç”°é–“é“è·¯ï¼Œé¿å…è¢«è¾²æ©Ÿæˆ–è»Šè¼›è¼¾æ–ƒ(è·¯æ®º)ã€‚",howto:"<strong>ã€åœ°é»ã€‘</strong>è¨­ç½®åœ¨ç”°é–“é“è·¯ã€ç”°åŸ‚ä¸‹æ–¹ã€‚<br><strong>ã€è¨­è¨ˆã€‘</strong>å…§å¾‘ç´„ 30-50 å…¬åˆ†ï¼Œå…§éƒ¨éœ€ä¿æŒæ˜æš—ã€æ¿•æ½¤ï¼Œæ´å£å…©å´æ‡‰æœ‰æ¤è¢«å¼•å°ã€‚",sroiFarms:"æ¹§å¥é…ªæ¢¨è¾²å ´ã€é›¨ç¤¾å±±ä¸‹è¾²å ´"},{id:"f5",name:"ç¶ åŒ–æ°´é“",icon:"ğŸ’§",zone:"dz5",placed:!1,benefits:["water_edge"],reason:"å–ä»£å‚³çµ±æ°´æ³¥æºï¼Œå‰µé€ ä¸€å€‹ä¿æ°´ã€ä¿æ¿•ã€é™æº«çš„å¾®æ£²åœ°ï¼Œæˆç‚ºèŒèšªã€è›‡é¡ã€æ°´ç”Ÿæ˜†èŸ²çš„é¿é›£æ‰€èˆ‡ç§»å‹•é€šé“ã€‚",howto:"<strong>ã€çµæ§‹ã€‘</strong>å°‡æºæ¸ æ”¹ç‚ºè‡ªç„¶åœŸå¡æˆ–é‹ªè¨­åµçŸ³åº•ï¼Œä¸åšæ°´æ³¥åŒ–ã€‚<br><strong>ã€è¨­è¨ˆã€‘</strong>å…©å´ç¨®æ¤é‡è–‘èŠ±ã€é¦™è’²ç­‰æŒºæ°´æ¤ç‰©ï¼Œä¸¦æ”¾ç½®çŸ³å¡Šæˆ–æ¯æœ¨ä¾›å‹•ç‰©èº²è—ã€‚"},{id:"f6",name:"å°æ¿•åœ°",icon:"ğŸ¸",zone:"dz6",placed:!1,benefits:["wetland"],reason:"åœ¨è¾²ç”°ä¸­å‰µé€ ä¸€å€‹ç”Ÿç‰©å¤šæ¨£æ€§ç†±é»ï¼Œæ˜¯è›™é¡ã€èœ»èœ“ã€æ°´é³¥ç­‰å‹•ç‰©ç¹æ®–ã€è¦“é£Ÿã€æ£²æ¯çš„æ ¸å¿ƒå ´æ‰€ï¼Œä¹Ÿæ˜¯çµ•ä½³çš„ç”Ÿæ…‹æ•™è‚²é»ã€‚",howto:"<strong>ã€åœ°é»ã€‘</strong>åˆ©ç”¨ç”°å€è§’è½çš„ä½çªªè™•æˆ–ä¼‘è€•ç”°ã€‚<br><strong>ã€è¨­è¨ˆã€‘</strong>é¢ç©ç´„ 1.5â€“4 å…¬å°ºï¼Œæ°´æ·± 0.5-1 å…¬å°ºï¼Œé‚Šå¡ç·©é™ï¼Œåº•éƒ¨å¯ç”¨é»åœŸé˜²æ¼ã€‚ç¨®æ¤æ°´ç‡­ã€é‡æ…ˆå§‘ç­‰æ°´ç”Ÿæ¤ç‰©ã€‚"},{id:"f8",name:"æ°´å²¸ç·©è¡å¸¶",icon:"ğŸŒŠ",zone:"dz8",placed:!1,benefits:["water_edge"],reason:"ä¿è­·æºªæµã€æ°´å¡˜çš„æ°´è³ªï¼Œèƒ½æœ‰æ•ˆæ””æˆªã€éæ¿¾å¾è¾²ç”°æµå‡ºçš„è¾²è—¥èˆ‡è‚¥æ–™ï¼ŒåŒæ™‚æä¾›è±å¯Œçš„æ¿•åœ°ç”Ÿæ…‹ç³»è®“å¤šæ¨£ç”Ÿç‰©æ£²æ¯ã€‚",howto:"<strong>ã€å¯¬åº¦ã€‘</strong>åœ¨æ°´å²¸èˆ‡è¾²ç”°é–“ä¿ç•™ 5â€“15 å…¬å°ºå¯¬ã€‚<br><strong>ã€æ¤è¢«ã€‘</strong>ç”±æ°´é‚Šè‡³é™¸åœ°ï¼Œä¾åºç¨®æ¤æ°´ç”Ÿæ¤ç‰©ã€è‰æœ¬å±¤ã€çŒæœ¨å±¤ï¼Œå½¢æˆå¤šå±¤æ¬¡ä¿è­·ã€‚"},{id:"f9",name:"è‡ªç„¶åŒ–è­·å²¸",icon:"â›°ï¸",zone:"dz9",placed:!1,benefits:["water_edge"],reason:"å°‡å‚ç›´é™¡å³­çš„æ°´æ³¥å ¤å²¸ï¼Œæ”¹é€ ç‚ºå‹•ç‰©å¯è‡ªç”±é€²å‡ºçš„ç·©å¡ã€‚å¢åŠ æ°´é™¸äº¤ç•Œçš„æ£²åœ°å¤šæ¨£æ€§ï¼Œè®“é¾œã€è›™èƒ½è¼•æ˜“ä¸Šä¸‹å²¸ã€‚",howto:"<strong>ã€æ–¹å¼ã€‘</strong>ç§»é™¤éƒ¨åˆ†æ°´æ³¥å¡Šï¼Œå›å¡«åœŸå£¤ï¼Œæˆ–ä½¿ç”¨æŸ³æ¢ç·¨ç¹”çš„çŸ³ç± ã€æ¤ç”Ÿè¢‹ç­‰æŸ”æ€§ææ–™æ‰“é€ ç·©å¡ã€‚<br><strong>ã€è¨­è¨ˆã€‘</strong>å¡ä¸Šå¯ç¨®æ¤åŸç”Ÿè‰æœ¬æˆ–çŒæœ¨ï¼Œç©©å®šå¡é¢ã€‚"},{id:"f10",name:"æ¼‚æµ®æ£²åœ°",icon:"ğŸï¸",zone:"dz10",placed:!1,benefits:["wetland"],reason:"åœ¨æ°´åŸŸä¸­æä¾›ä¸€å€‹ç©©å®šçš„å¹³å°ï¼Œè®“èœ»èœ“ã€è±†å¨˜ç­‰æ˜†èŸ²å¯ä»¥åœæ£²ã€ç”¢åµï¼Œä¹Ÿè®“å°é’è›™æœ‰èº²é¿æ°´ä¸­å¤©æ•µçš„ä¼‘æ¯ç«™ã€‚",howto:"<strong>ã€ææ–™ã€‘</strong>ä½¿ç”¨ç«¹å­ã€ç„¡æ¯’å¡‘è† ç®¡ç­‰è£½æˆæ¡†æ¶ï¼Œä¸­é–“é‹ªè¨­ç¶²æˆ–ç¨®æ¤å¸ƒã€‚<br><strong>ã€æ¤è¢«ã€‘</strong>ç¨®æ¤ç©ºå¿ƒèœã€æ°´èŠ™è“‰ç­‰æ°´ç”Ÿæ¤ç‰©ï¼Œæ ¹ç³»å¯æä¾›æ°´ä¸­ç”Ÿç‰©åº‡è­·ã€‚"},{id:"f12",name:"æ¯æœ¨å †ã€è‰å †",icon:"ğŸªµ",zone:"dz12",placed:!1,benefits:["forest","wetland"],reason:"æä¾›ä¸€å€‹ç©©å®šã€æº«æ¿•åº¦è®ŠåŒ–å°çš„å¾®ç’°å¢ƒï¼Œæ˜¯è›‡ã€èœ¥èœ´ã€é¾œã€è›™ç­‰è®Šæº«å‹•ç‰©çµ•ä½³çš„èº²è—ã€è¦“é£Ÿæˆ–åº¦å†¬çš„å ´æ‰€ã€‚",howto:"<strong>ã€åœ°é»ã€‘</strong>åœ¨æ£®æ—é‚Šç·£ã€è‰å¸¶æˆ–ç”°å€è§’è½ç­‰ä¸æ˜“å—å¹²æ“¾è™•ã€‚<br><strong>ã€ææ–™ã€‘</strong>å°‡ä¿®å‰ªä¸‹ä¾†çš„æ¨¹æã€æ¯æœ¨ã€è½è‘‰ã€ç¨»è‰å †ç–Šå³å¯ï¼Œä¸éœ€éåº¦æ•´é½Šã€‚",sroiFarms:"æ¹§å¥é…ªæ¢¨è¾²å ´"},{id:"f13",name:"æ˜†èŸ²æ—…é¤¨",icon:"ğŸ¦‹",zone:"dz13",placed:!1,benefits:["farm_building"],reason:"ç‚ºç¨å±…èœ‚(å¦‚åˆ‡è‘‰èœ‚)ç­‰æˆç²‰æ˜†èŸ²ï¼Œä»¥åŠç“¢èŸ²ã€è‰è›‰ç­‰å¤©æ•µæ˜†èŸ²ï¼Œæä¾›ç¹æ®–èˆ‡éå†¬çš„ä½æ‰€ï¼Œæœ‰åŠ©æ–¼ä½œç‰©æˆç²‰èˆ‡ç”Ÿç‰©é˜²æ²»ã€‚",howto:"<strong>ã€ææ–™ã€‘</strong>ä½¿ç”¨æœ¨ç®±ã€ç«¹ç­’ã€é‘½å­”æœ¨å¡Šã€ç¨»è‰ã€æ¾æœç­‰å¤©ç„¶ææ–™å †ç–Šè€Œæˆã€‚<br><strong>ã€åœ°é»ã€‘</strong>è¨­ç½®åœ¨è‰å¸¶ã€æœåœ’æ—ï¼Œé›¢åœ°ç´„ 30-100 å…¬åˆ†ã€‚"},{id:"f14",name:"1959å‹•ä¿å°ˆç·š",icon:"ğŸ“",zone:"dz_dog",placed:!1,removes:"disturbance-dog",reason:"é€šå ±æµæµªçŠ¬éš»èƒ½å¹«åŠ©ç›¸é—œå–®ä½é€²è¡Œé©ç•¶çš„å®‰ç½®ï¼Œæ¸›å°‘ç‰ å€‘å°é‡ç”Ÿå‹•ç‰©ï¼ˆå¦‚çŸ³è™ã€ç©¿å±±ç”²ï¼‰çš„è¿½é€èˆ‡æ”»æ“Šï¼Œä¿è­·æ·ºå±±ç”Ÿæ…‹ç³»çš„å®‰å…¨ã€‚",howto:"æ’¥æ‰“1959å‹•ä¿å°ˆç·šï¼Œæ¸…æ¥šèªªæ˜æµæµªçŠ¬çš„ä½ç½®ã€æ•¸é‡ã€ç‰¹å¾µï¼Œè®“å°ˆæ¥­äººå“¡èƒ½æœ‰æ•ˆè™•ç†ã€‚"}],dropZones:[{id:"dz1",position:{top:"71%",left:"5%",width:"28%",height:"4%"},cx:19,cy:73},{id:"dz3",position:{top:"32%",left:"50%",width:"5%",height:"6%"},cx:52.5,cy:35},{id:"dz5",position:{top:"70%",left:"2%",width:"3%",height:"25%"},cx:3.5,cy:82.5},{id:"dz6",position:{top:"85%",left:"25%",width:"22%",height:"10%"},cx:36,cy:90},{id:"dz8",position:{top:"40%",left:"68%",width:"8%",height:"38%"},cx:72,cy:59},{id:"dz9",position:{top:"50%",left:"93%",width:"5%",height:"30%"},cx:95.5,cy:65},{id:"dz10",position:{top:"82%",left:"78%",width:"15%",height:"10%"},cx:85.5,cy:87},{id:"dz11",position:{top:"38%",left:"30%",width:"22%",height:"8%"},cx:41,cy:42},{id:"dz12",position:{top:"45%",left:"0%",width:"10%",height:"10%"},cx:5,cy:50},{id:"dz13",position:{top:"68%",left:"42%",width:"10%",height:"10%"},cx:47,cy:73},{id:"dz_dog",position:{top:"55%",left:"20%",width:"6%",height:"8%"},cx:23,cy:59}],habitatAnchors:{forest:{cx:20,cy:30,name:"æ£®æ—"},water_edge:{cx:80,cy:50,name:"æ°´åŸŸé‚Šç·£"},wetland:{cx:88,cy:88,name:"æ¿•åœ°"},farm_building:{cx:60,cy:40,name:"è¨­æ–½å‘¨é‚Š"},farm_corridor:{cx:30,cy:65,name:"ç”°é–“å»Šé“"}}};
        const scene=document.getElementById("scene"),facilitiesList=document.getElementById("facilities-list"),feedbackModal=document.getElementById("feedback-modal"),modalTitle=document.getElementById("modal-title"),modalContent=document.getElementById("modal-content"),modalCloseBtn=document.getElementById("modal-close-btn"),sroiModal=document.getElementById("sroi-modal"),sroiModalCloseBtn=document.getElementById("sroi-modal-close-btn"),connectionCounterEl=document.getElementById("connection-counter"),canvas=document.getElementById("connection-canvas"),ctx=canvas.getContext("2d"),animalPen=document.getElementById("animal-pen");let sceneRect,draggedItem=null,connectedHabitats=new Set,sroiModalShown=!1,placedFacilitiesCount=0;function init(){setTimeout(resizeCanvas,0),window.addEventListener("resize",resizeCanvas);const e=[...new Map(gameData.animals.map(e=>[e.name,e])).values()];e.forEach(e=>{const t=document.createElement("div");t.id=`pen-${e.name}`,t.className="pen-animal text-2xl",t.textContent=e.icon,animalPen.appendChild(t)}),renderElements(gameData.animals,createAnimalElement),renderElements(gameData.disturbances,createDisturbanceElement),renderElements(gameData.facilities,createFacilityElement),renderElements(gameData.dropZones,createDropZoneElement),modalCloseBtn.addEventListener("click",hideFeedbackModal),sroiModalCloseBtn.addEventListener("click",hideSroiModal),feedbackModal.addEventListener("click",e=>{e.target===feedbackModal&&hideFeedbackModal()}),sroiModal.addEventListener("click",e=>{e.target===sroiModal&&hideSroiModal()})}function resizeCanvas(){sceneRect=scene.getBoundingClientRect(),canvas.width=sceneRect.width,canvas.height=sceneRect.height,ctx.clearRect(0,0,canvas.width,canvas.height),gameData.facilities.forEach(e=>{if(e.placed){const t=gameData.dropZones.find(t=>t.id===e.zone);e.benefits?.forEach(e=>{const o=gameData.habitatAnchors[e];t&&o&&drawConnectionLine(t,o)})}})}function renderElements(e,t){e.forEach(e=>{const o=t(e);o&&o.classList.contains("facility")?facilitiesList.appendChild(o):o&&scene.appendChild(o)})}function createIconElement(e,t=!1){const o=document.createElement("div");return o.id=e.id,o.className="game-icon",t?(o.classList.add("disturbance-icon"),o.innerHTML=`<div class="icon-symbol">â—ï¸</div><span>${e.name}</span><div class="text-xl">${e.icon}</div>`):(o.classList.add("animal"),o.dataset.habitat=e.habitat,o.innerHTML=`<div class="text-3xl">${e.icon}</div><span>${e.name}</span>`),o.style.top=e.position.top,o.style.left=e.position.left,o}function createAnimalElement(e){const t=createIconElement(e,!1);return t.style.opacity="0",t.style.transform="scale(0)",t.style.top="5%",t.style.left="95%",t}function createDisturbanceElement(e){return createIconElement(e,!0)}function createFacilityElement(e){const t=document.createElement("div");return t.id=e.id,t.dataset.zone=e.zone,t.className="facility bg-lime-100 p-2 rounded-lg border border-lime-300 flex items-center gap-2",t.draggable=!0,t.innerHTML=`<span class="text-lg">${e.icon}</span><span class="text-xs">${e.name}</span>`,t.addEventListener("dragstart",handleDragStart),t.addEventListener("dragend",handleDragEnd),t}function createDropZoneElement(e){const t=document.createElement("div");return t.id=e.id,t.className="drop-zone",t.style.top=e.position.top,t.style.left=e.position.left,t.style.width=e.position.width,t.style.height=e.position.height,t.addEventListener("dragover",handleDragOver),t.addEventListener("dragleave",handleDragLeave),t.addEventListener("drop",handleDrop),t}function handleDragStart(e){draggedItem=e.target,setTimeout(()=>draggedItem&&(draggedItem.style.display="none"),0)}function handleDragEnd(e){draggedItem&&(draggedItem.style.display="flex"),draggedItem=null}function handleDragOver(e){e.preventDefault(),e.target.classList.contains("drop-zone")&&e.target.classList.add("hovered")}function handleDragLeave(e){e.target.classList.contains("drop-zone")&&e.target.classList.remove("hovered")}function handleDrop(e){e.preventDefault();const t=e.target.closest(".drop-zone");if(t&&!t.classList.contains("occupied")){t.classList.remove("hovered");const o=gameData.facilities.find(e=>e.id===draggedItem.id);o&&o.zone===t.id?placeFacility(draggedItem,t,o):showFeedbackModal(!1)}}function releaseAnimals(e){gameData.animals.forEach(t=>{if(e.includes(t.habitat)&&!t.released){t.released=!0;const o=document.getElementById(t.id),n=document.getElementById(`pen-${t.name}`);o&&(o.style.top=t.position.top,o.style.left=t.position.left,o.style.opacity="1",o.style.transform="scale(1)"),n&&(n.style.opacity="0.2")}}),activateAnimals(e)}function placeFacility(e,t,o){o.placed=!0,placedFacilitiesCount++,e.classList.add("placed"),e.draggable=!1,t.innerHTML=`<div class="w-full h-full flex items-center justify-center text-green-800 font-bold bg-green-200/80 p-1 text-xs text-center">${o.name}</div>`,t.classList.add("occupied"),showFeedbackModal(!0,o),updateDisturbanceIcons(),o.removes&&(()=>{const e=document.getElementById(o.removes);e&&(e.style.transition="opacity 0.5s, transform 0.5s",e.style.opacity="0",e.style.transform="scale(0)",setTimeout(()=>e.remove(),500))})(),o.benefits&&(releaseAnimals(o.benefits),(()=>{const e=gameData.dropZones.find(e=>e.id===t.id);o.benefits.forEach(t=>{const o=gameData.habitatAnchors[t];e&&o&&(drawConnectionLine(e,o),connectedHabitats.add(o.name))})})(),updateConnectionCounter()),checkCompletion()}function updateConnectionCounter(){const e=connectedHabitats.size;connectionCounterEl.textContent=`å·²é€£æ¥ ${e} å€‹ç”Ÿæ…‹æ£²åœ°ï¼š${[...connectedHabitats].join("ã€")}`,e>0&&(connectionCounterEl.classList.remove("bg-green-100","text-green-700"),connectionCounterEl.classList.add("bg-yellow-200","text-yellow-800"))}function updateDisturbanceIcons(){const e=document.querySelectorAll(".disturbance-icon"),t=Math.max(.1,1-placedFacilitiesCount/gameData.facilities.length);e.forEach(e=>{e.style.transform=`scale(${t})`})}function checkCompletion(){gameData.facilities.every(e=>e.placed)&&!sroiModalShown&&(sroiModalShown=!0,setTimeout(showSroiModal,1200))}function showFeedbackModal(e,t){const o=feedbackModal.querySelector("div > div");if(o){if(e){modalTitle.textContent=`åšå¾—å¥½ï¼é€™æ˜¯ã€Œ${t.name}ã€`;let n="";t.sroiFarms&&(n=`\n                    <div class="mt-4 p-3 border-2 border-green-600 bg-green-50 rounded-lg">\n                        <p class="font-bold text-green-800">â­ å·²å®Œæˆæœ¬é …è¨­æ–½ä¸¦è¨ˆç®—SROIä¹‹è¾²å ´ï¼š</p>\n                        <p class="text-gray-700">${t.sroiFarms}</p>\n                    </div>\n                    `),modalContent.innerHTML=`\n                    <div class="space-y-4">\n                        <div>\n                            <h4 class="text-lg font-semibold text-green-800 border-l-4 border-green-500 pl-2 mb-1">ğŸŒ¿ ç”Ÿæ…‹åŠŸèƒ½</h4>\n                            <p class="text-gray-700 leading-relaxed">${t.reason}</p>\n                        </div>\n                        <div>\n                            <h4 class="text-lg font-semibold text-green-800 border-l-4 border-green-500 pl-2 mb-1">ğŸ› ï¸ å¦‚ä½•å»ºé€ </h4>\n                            <div class="text-gray-700 leading-relaxed">${t.howto}</div>\n                        </div>\n                         <div class="mt-4 p-3 border-2 border-blue-400 bg-blue-50 rounded-lg">\n                            <p class="text-blue-800">å› ç‚ºæ‚¨è¨­ç½®äº†ç”Ÿæ…‹ä¿è­·æªæ–½ï¼Œæ³¨æ„è¾²æ‘ç•«å¸ƒä¸­çš„é©šå˜†è™Ÿæœƒé€æ¼¸ç¸®å°ï¼›é€™äº›å¹²æ“¾ç”Ÿæ…‹çš„è¾²æ¥­ç”Ÿç”¢è¡Œç‚ºä¸¦ä¸æ˜¯æ¶ˆå¤±äº†ï¼Œè€Œæ˜¯å› ç‚ºå‹å–„ç”Ÿæ…‹ï¼Œè®“åŸæœ‰çš„å¹²æ“¾å°ç”Ÿæ…‹çš„å½±éŸ¿é™å¾—æ›´ä½äº†!é€™æ¨£è‰¯å–„çš„å¾ªç’°ä¸­ï¼Œè¾²å‹æ¼¸æ¼¸å—ç›Šæ–¼ç”Ÿæ…‹ï¼ŒåŒ–å­¸è³‡æçš„ä½¿ç”¨ä¹Ÿæœƒé€æ¼¸é™ä½!</p>\n                        </div>\n                        ${n}\n                    </div>\n                `}else modalTitle.textContent="å™¢å–”ï¼Œå†è©¦ä¸€æ¬¡ï¼",modalContent.innerHTML="<p>é€™å€‹ä½ç½®å¥½åƒä¸å¤ªå°å–”ï¼Œæƒ³æƒ³çœ‹é€™å€‹è¨­æ–½æœ€èƒ½å¹«åŠ©åˆ°å“ªäº›ç”Ÿç‰©ï¼Œä»¥åŠå®ƒæ‡‰è©²æ”¾åœ¨å“ªè£¡æ‰èƒ½ç™¼æ®æœ€å¤§ä½œç”¨å‘¢ï¼Ÿ</p>";feedbackModal.classList.remove("hidden"),setTimeout(()=>{o.classList.remove("scale-95","opacity-0")},10)}}function hideFeedbackModal(){const e=feedbackModal.querySelector("div > div");e&&(e.classList.add("scale-95","opacity-0"),setTimeout(()=>{feedbackModal.classList.add("hidden")},300))}function showSroiModal(){const e=sroiModal.querySelector("div > div");e&&(sroiModal.classList.remove("hidden"),setTimeout(()=>{e.classList.remove("scale-95","opacity-0")},10))}function hideSroiModal(){const e=sroiModal.querySelector("div > div");e&&(e.classList.add("scale-95","opacity-0"),setTimeout(()=>{sroiModal.classList.add("hidden")},300))}function activateAnimals(e){document.querySelectorAll(".animal").forEach(t=>{e.includes(t.dataset.habitat)&&(t.classList.add("active"),t.style.setProperty("--x1",`${20*(Math.random()-.5)}px`),t.style.setProperty("--y1",`${20*(Math.random()-.5)}px`),t.style.setProperty("--x2",`${20*(Math.random()-.5)}px`),t.style.setProperty("--y2",`${20*(Math.random()-.5)}px`),t.style.setProperty("--x3",`${20*(Math.random()-.5)}px`),t.style.setProperty("--y3",`${20*(Math.random()-.5)}px`))})}function drawConnectionLine(e,t){const o=e.cx/100*canvas.width,n=e.cy/100*canvas.height,i=t.cx/100*canvas.width,d=t.cy/100*canvas.height;ctx.beginPath(),ctx.moveTo(o,n),ctx.lineTo(i,d),ctx.strokeStyle="rgba(255, 255, 0, 0.8)",ctx.lineWidth=4,ctx.setLineDash([5,5]),ctx.stroke()}
        
        init();
    });
    </script>
</body>
</html>
